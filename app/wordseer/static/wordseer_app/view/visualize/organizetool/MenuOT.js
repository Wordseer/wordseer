/* Copyright 2012 Aditi Muralidharan. See the file "LICENSE" for the full license governing this code. */Ext.define('WordSeer.view.visualize.organizetool.MenuOT', {    extend:'Ext.menu.Menu',    alias:'widget.MenuOT',    alternateClassName: ['MenuOT'],    constructor:function(cfg, el){        var menuItems = [];        menuItems.push({            text: "Change Color",            menu: [                {                     text: "Default",                    handler:function() {                        var color;                                                switch (el.getAttribute("type") ) {                            case "group":                                Color.changeColor(el, OrganizeTool.g_color);                                break;                                                        case "bubble":                                Color.changeColor(el, OrganizeTool.c_color);                                break;                                                        case "sentence":                                Color.changeColor(el, OrganizeTool.s_color);                                break;                                                        case "word":                                Color.changeColor(el, OrganizeTool.s_color);                                break;                                                        case "set":                                Color.changeColor(el, OrganizeTool.set_color);                                break;                                                            case "annotation":                                Color.changeColor(el, OrganizeTool.a_color);                                break;                                                   case "document":                                Color.changeColor(el, "#000000");                                break;                                                }                                                return;                    }                },                {                     text: "Red",                    icon: "../../style/icons/red.png",                    handler:function() {                        Color.changeColor(el, "#F1B191");                        return;                    }                },                {                     text: "Green",                    icon: "../../style/icons/green.png",                    handler:function() {                        Color.changeColor(el, "#D1E1B1");                        return;                    }                },                {                     text: "Blue",                    icon: "../../style/icons/blue.png",                    handler:function() {                        Color.changeColor(el, "#B4B9F9");                        return;                    }                },                {                     text: "Yellow",                    icon: "../../style/icons/yellow.png",                    handler:function() {                        Color.changeColor(el, "#F9D854");                        return;                    }                }            ]        });                if (el.getAttribute("type") === "sentence" || el.getAttribute("type") === "set" || el.getAttribute("type") === "word") {            menuItems.push({                text: "Change Shape",                menu: [                    {                        text: "Rounded edges",                        icon: "../../style/icons/rounded.png",                        handler: function(d) {                            ShapeOT.changeShape(el, "rounded");                        }                    },                    {                        text: "Right edges",                        icon: "../../style/icons/square.png",                        handler: function(d) {                            ShapeOT.changeShape(el, "right")                        }                    }                ]            });                    }                if (el.getAttribute("type") === "sentence" || el.getAttribute("type") === "set" || el.getAttribute("type") === "word" || el.getAttribute("type") === "document" || el.getAttribute("type") === "annotation") {            menuItems.push({                text: "Create Copy",                handler: function(d) {                    var ot = OrganizeTool.getInstance();                    ot.copyElement(el);                }            });                    }                if(el.getAttribute("type") === "group") {            menuItems.unshift({                text: "Change Shape",                menu: [                    {                        text: "rectangle",                        icon: "../../style/icons/square.png",                        handler:function() {                            ShapeOT.changeShapeOfGroup(el, 1);                            return;                        }                    },                    {                        text: "rounded",                        icon: "../../style/icons/rounded.png",                        handler:function() {                            ShapeOT.changeShapeOfGroup(el, 2);                            return;                        }                    },                    {                        text: "very rounded",                        icon: "../../style/icons/very-rounded.png",                        handler:function() {                            ShapeOT.changeShapeOfGroup(el, 3);                            return;                        }                    }                ]            });                                    menuItems.push({                text: "Group",                menu: [                                        {                                text: "Change Color",                                menu: [                                    {                                         text: "Red",                                        icon: "../../style/icons/red.png",                                        handler:function() {                                            Color.changeGroupColor(el, "#F1B191");                                            return;                                        }                                    },                                    {                                         text: "Green",                                        icon: "../../style/icons/green.png",                                        handler:function() {                                            Color.changeGroupColor(el, "#D1E1B1");                                            return;                                        }                                    },                                    {                                         text: "Blue",                                        icon: "../../style/icons/blue.png",                                        handler:function() {                                            Color.changeGroupColor(el, "#B4B9F9");                                            return;                                        }                                    },                                    {                                         text: "Yellow",                                        icon: "../../style/icons/yellow.png",                                        handler:function() {                                            Color.changeGroupColor(el, "#F9D854");                                            return;                                        }                                    }                                ]                            },                                                        {                                text: "Change Shape",                                menu: [                                    {                                         text: "Rounded Edges",                                        icon: "../../style/icons/rounded.png",                                        handler:function() {                                            ShapeOT.changeGroupShape(el, "rounded");                                            return;                                        }                                    },                                    {                                         text: "Rectangle",                                        icon: "../../style/icons/square.png",                                        handler:function() {                                            ShapeOT.changeGroupShape(el, "right");                                            return;                                        }                                    }                                ]                            },                                                        {                                text: "Remove Group and Children",                                handler:function() {                                    Group.removeAll(el);                                    return;                                }                            }                    ]            });        }                menuItems.push({            text: "Remove",            handler:function() {                var ot = OrganizeTool.getInstance();                ot.removeElement(el);                return;            }        });               this.items = menuItems;        this.callParent(arguments);    },        listeners:{        mouseleave:function(){            this.hide();        }    },    statics: {        giveMenu:function(el) {            el                .on("mousedown", function(d){                     var e = d3.event;                    var evt = (e==null ? event:e);                                        if (evt.shiftKey) {                         new MenuOT({}, D3Helper.getElFromSel(el)).showAt([(evt.x - 5), (evt.y - 5)]);                       }                                          });                 }        }})